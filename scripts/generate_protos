#!/usr/bin/env bash

set -euo pipefail

echo "Cleaning up previous generated files.."
rm -rf protogen/golang

echo "Making directory for generated files..."
mkdir -p protogen/golang

echo "Generating protos..."
pushd proto

# TODO: update to handle the gateway/web-api protos
protoc --go_out=../protogen/golang \
    --go_opt=paths=source_relative \
    --go-grpc_out=../protogen/golang \
    --go-grpc_opt=paths=source_relative \
    ./**/*.proto

popd
